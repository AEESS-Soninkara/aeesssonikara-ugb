<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AEESS - Association des √âl√®ves et √âtudiants Sonink√© √† Saint-Louis</title>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-green: #2d7a3e;
            --light-green: #4a9d5f;
            --dark-green: #1a5229;
            --bg-light: #f0f2f5;
            --white: #ffffff;
            --text-dark: #333;
            --border: #e4e6eb;
            --hover-bg: #f2f3f5;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            line-height: 1.6;
            color: var(--text-dark);
            background: var(--bg-light);
        }

        /* Navigation */
        nav {
            background: var(--white);
            color: var(--text-dark);
            padding: 0.5rem 1rem;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            border-bottom: 1px solid var(--border);
        }

        .nav-container {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 1.4rem;
            font-weight: bold;
            color: var(--primary-green);
        }

        .logo img {
            width: 45px;
            height: 45px;
            border-radius: 50%;
        }

        .nav-links {
            display: flex;
            gap: 1rem;
            list-style: none;
        }

        .nav-links a {
            color: var(--text-dark);
            text-decoration: none;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            transition: background 0.2s;
        }

        .nav-links a:hover {
            background: var(--hover-bg);
        }

        .nav-right {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--primary-green);
            color: var(--white);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            cursor: pointer;
        }

        .btn {
            padding: 0.6rem 1.2rem;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.95rem;
            font-weight: 600;
            transition: all 0.2s;
            text-decoration: none;
            display: inline-block;
        }

        .btn-primary {
            background: var(--primary-green);
            color: var(--white);
        }

        .btn-primary:hover {
            background: var(--dark-green);
        }

        .btn-secondary {
            background: var(--bg-light);
            color: var(--primary-green);
            border: 1px solid var(--border);
        }

        .btn-secondary:hover {
            background: var(--hover-bg);
        }

        /* Hero Section */
        .hero {
            background: linear-gradient(135deg, var(--primary-green) 0%, var(--dark-green) 100%);
            color: var(--white);
            padding: 4rem 2rem;
            text-align: center;
        }

        .hero h1 {
            font-size: 2.5rem;
            margin-bottom: 1rem;
        }

        .hero p {
            font-size: 1.2rem;
            margin-bottom: 2rem;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
        }

        .hero-stats {
            display: flex;
            justify-content: center;
            gap: 3rem;
            margin-top: 2rem;
            flex-wrap: wrap;
        }

        .stat {
            text-align: center;
        }

        .stat-number {
            font-size: 2.5rem;
            font-weight: bold;
        }

        .stat-label {
            font-size: 1rem;
            opacity: 0.9;
        }

        /* Sections */
        section {
            padding: 4rem 2rem;
            max-width: 1200px;
            margin: 0 auto;
        }

        section:nth-child(even) {
            background: var(--white);
        }

        h2 {
            color: var(--primary-green);
            font-size: 2rem;
            margin-bottom: 2rem;
            text-align: center;
        }

        /* Actions Grid */
        .actions-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 2rem;
            margin-top: 2rem;
        }

        .action-card {
            background: var(--white);
            padding: 2rem;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            transition: transform 0.2s, box-shadow 0.2s;
            border: 1px solid var(--border);
        }

        .action-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }

        .action-card h3 {
            color: var(--primary-green);
            margin-bottom: 1rem;
        }

        /* Crisis Section */
        .crisis-alert {
            background: #fff3cd;
            border-left: 5px solid #ffc107;
            padding: 2rem;
            margin: 2rem 0;
            border-radius: 8px;
        }

        .crisis-alert h3 {
            color: #856404;
            margin-bottom: 1rem;
        }

        /* Donation Section */
        .donation-methods {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            margin-top: 2rem;
        }

        .payment-card {
            background: var(--white);
            padding: 2rem;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            text-align: center;
            border: 1px solid var(--border);
        }

        .payment-card h3 {
            color: var(--primary-green);
            margin-bottom: 1rem;
        }

        .payment-number {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--primary-green);
            margin: 1rem 0;
        }

        /* Impact Calculator */
        .impact-examples {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin-top: 2rem;
        }

        .impact-item {
            background: var(--light-green);
            color: var(--white);
            padding: 1.5rem;
            border-radius: 12px;
            text-align: center;
        }

        .impact-amount {
            font-size: 1.8rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.6);
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: var(--white);
            padding: 2rem;
            border-radius: 12px;
            max-width: 450px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 8px 32px rgba(0,0,0,0.3);
        }

        .form-group {
            margin-bottom: 1.2rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            color: var(--text-dark);
            font-weight: 500;
            font-size: 0.95rem;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid var(--border);
            border-radius: 8px;
            font-size: 1rem;
            font-family: inherit;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: var(--primary-green);
        }

        /* ===== MEMBER DASHBOARD - FACEBOOK STYLE ===== */
        .dashboard {
            display: none;
            background: var(--bg-light);
        }

        .dashboard.active {
            display: block;
        }

        .dashboard-container {
            max-width: 1400px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: 280px 1fr 300px;
            gap: 1.5rem;
            padding: 1.5rem;
            min-height: calc(100vh - 70px);
        }

        /* Left Sidebar */
        .left-sidebar {
            position: sticky;
            top: 70px;
            height: fit-content;
        }

        .sidebar-menu {
            background: var(--white);
            border-radius: 12px;
            padding: 1rem;
            box-shadow: 0 1px 2px rgba(0,0,0,0.1);
        }

        .menu-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 0.75rem;
            border-radius: 8px;
            cursor: pointer;
            transition: background 0.2s;
            font-weight: 500;
            color: var(--text-dark);
        }

        .menu-item:hover {
            background: var(--hover-bg);
        }

        .menu-item.active {
            background: var(--primary-green);
            color: var(--white);
        }

        .menu-icon {
            font-size: 1.5rem;
        }

        /* Main Feed */
        .main-feed {
            max-width: 680px;
        }

        .create-post-box {
            background: var(--white);
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            box-shadow: 0 1px 2px rgba(0,0,0,0.1);
        }

        .post-input-area {
            display: flex;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .post-input {
            flex: 1;
            padding: 0.75rem 1rem;
            border: 1px solid var(--border);
            border-radius: 24px;
            background: var(--bg-light);
            font-size: 1rem;
            resize: none;
            font-family: inherit;
        }

        .post-input:focus {
            outline: none;
            background: var(--white);
        }

        .post-actions-bar {
            display: flex;
            gap: 1rem;
            padding-top: 1rem;
            border-top: 1px solid var(--border);
        }

        .post-action-btn {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            padding: 0.75rem;
            background: none;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
            color: #65676b;
            transition: background 0.2s;
        }

        .post-action-btn:hover {
            background: var(--hover-bg);
        }

        /* Post Card - Facebook Style */
        .post-card {
            background: var(--white);
            border-radius: 12px;
            padding: 0;
            margin-bottom: 1.5rem;
            box-shadow: 0 1px 2px rgba(0,0,0,0.1);
        }

        .post-header {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 1rem 1.5rem;
        }

        .post-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--primary-green);
            color: var(--white);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1rem;
        }

        .post-author-info {
            flex: 1;
        }

        .post-author-name {
            font-weight: 600;
            color: var(--text-dark);
        }

        .post-time {
            font-size: 0.85rem;
            color: #65676b;
        }

        .post-content {
            padding: 0 1.5rem 1rem;
            font-size: 1rem;
            line-height: 1.5;
        }

        .post-stats {
            display: flex;
            justify-content: space-between;
            padding: 0 1.5rem;
            margin-bottom: 0.5rem;
            color: #65676b;
            font-size: 0.9rem;
        }

        .post-actions {
            display: flex;
            border-top: 1px solid var(--border);
            padding: 0.5rem 0;
        }

        .post-action {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            padding: 0.75rem;
            background: none;
            border: none;
            cursor: pointer;
            color: #65676b;
            font-weight: 600;
            border-radius: 8px;
            transition: background 0.2s;
            font-size: 0.95rem;
        }

        .post-action:hover {
            background: var(--hover-bg);
        }

        .post-action.liked {
            color: var(--primary-green);
        }

        /* Comments Section */
        .comments-section {
            padding: 0 1.5rem 1rem;
            border-top: 1px solid var(--border);
        }

        .comment-item {
            display: flex;
            gap: 0.75rem;
            margin-top: 0.75rem;
        }

        .comment-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: var(--primary-green);
            color: var(--white);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.85rem;
            flex-shrink: 0;
        }

        .comment-content {
            flex: 1;
        }

        .comment-bubble {
            background: var(--bg-light);
            padding: 0.75rem 1rem;
            border-radius: 18px;
            display: inline-block;
        }

        .comment-author {
            font-weight: 600;
            font-size: 0.9rem;
            margin-bottom: 0.25rem;
        }

        .comment-text {
            font-size: 0.9rem;
        }

        .comment-time {
            font-size: 0.8rem;
            color: #65676b;
            margin-top: 0.25rem;
            padding-left: 1rem;
        }

        .comment-input-area {
            display: flex;
            gap: 0.75rem;
            margin-top: 1rem;
            align-items: center;
        }

        .comment-input {
            flex: 1;
            padding: 0.65rem 1rem;
            border: 1px solid var(--border);
            border-radius: 24px;
            background: var(--bg-light);
            font-size: 0.9rem;
            font-family: inherit;
        }

        .comment-input:focus {
            outline: none;
            background: var(--white);
        }

        /* Right Sidebar */
        .right-sidebar {
            position: sticky;
            top: 70px;
            height: fit-content;
        }

        .contacts-box, .events-box {
            background: var(--white);
            border-radius: 12px;
            padding: 1rem;
            margin-bottom: 1rem;
            box-shadow: 0 1px 2px rgba(0,0,0,0.1);
        }

        .sidebar-title {
            font-weight: 600;
            font-size: 1.05rem;
            color: #65676b;
            margin-bottom: 1rem;
        }

        .contact-item {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.5rem;
            border-radius: 8px;
            cursor: pointer;
            transition: background 0.2s;
        }

        .contact-item:hover {
            background: var(--hover-bg);
        }

        .contact-avatar {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: var(--primary-green);
            color: var(--white);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            position: relative;
        }

        .online-dot {
            width: 10px;
            height: 10px;
            background: #31a24c;
            border: 2px solid var(--white);
            border-radius: 50%;
            position: absolute;
            bottom: 0;
            right: 0;
        }

        .contact-name {
            font-size: 0.95rem;
            font-weight: 500;
        }

        .event-item {
            padding: 0.75rem;
            border-radius: 8px;
            background: var(--bg-light);
            margin-bottom: 0.75rem;
        }

        .event-date {
            font-size: 0.85rem;
            color: var(--primary-green);
            font-weight: 600;
            margin-bottom: 0.25rem;
        }

        .event-title {
            font-size: 0.95rem;
            font-weight: 500;
        }

        /* Documents Section */
        .documents-section {
            padding: 2rem;
        }

        .upload-box {
            background: var(--white);
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 1px 2px rgba(0,0,0,0.1);
        }

        .documents-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 1rem;
        }

        .document-card {
            background: var(--white);
            padding: 1.5rem;
            border-radius: 12px;
            box-shadow: 0 1px 2px rgba(0,0,0,0.1);
            text-align: center;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            border: 1px solid var(--border);
        }

        .document-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }

        .document-icon {
            font-size: 3rem;
            margin-bottom: 0.5rem;
        }

        /* Profile Section */
        .profile-section {
            padding: 2rem;
        }

        .profile-header {
            background: var(--white);
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 1px 2px rgba(0,0,0,0.1);
            text-align: center;
        }

        .profile-avatar-large {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background: var(--primary-green);
            color: var(--white);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            font-weight: bold;
            margin: 0 auto 1rem;
        }

        .profile-name {
            font-size: 1.8rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
        }

        .profile-info-grid {
            background: var(--white);
            border-radius: 12px;
            padding: 2rem;
            box-shadow: 0 1px 2px rgba(0,0,0,0.1);
        }

        /* Footer */
        footer {
            background: var(--dark-green);
            color: var(--white);
            padding: 2rem;
            text-align: center;
            margin-top: 3rem;
        }

        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
        }

        .footer-links {
            display: flex;
            justify-content: center;
            gap: 2rem;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }

        .footer-links a {
            color: var(--white);
            text-decoration: none;
        }

        .hidden {
            display: none !important;
        }

        /* Loading Spinner */
        .spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid var(--primary-green);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 2rem auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Responsive */
        @media (max-width: 1200px) {
            .dashboard-container {
                grid-template-columns: 1fr;
            }
            
            .left-sidebar, .right-sidebar {
                display: none;
            }
        }

        @media (max-width: 768px) {
            .nav-links {
                display: none;
            }
            
            .hero h1 {
                font-size: 1.8rem;
            }
            
            .hero-stats {
                gap: 1.5rem;
            }

            .dashboard-container {
                padding: 1rem;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav>
        <div class="nav-container">
            <div class="logo">
                <span>üéì AEESS</span>
            </div>
            <ul class="nav-links" id="publicNav">
                <li><a href="#accueil">Accueil</a></li>
                <li><a href="#apropos">√Ä propos</a></li>
                <li><a href="#actions">Nos Actions</a></li>
                <li><a href="#crise">Crise du Logement</a></li>
                <li><a href="#dons">Soutenez-nous</a></li>
                <li><a href="#contact">Contact</a></li>
            </ul>
            <div class="nav-right">
                <button class="btn btn-primary" id="loginBtn" onclick="showLogin()">Connexion</button>
                <div id="userMenu" class="hidden">
                    <div class="user-avatar" id="userAvatar"></div>
                    <button class="btn btn-secondary" onclick="logout()">D√©connexion</button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Public Content -->
    <div id="publicContent">
        <!-- Hero Section -->
        <section class="hero" id="accueil">
            <h1>ENSEMBLE, SOUTENONS NOS √âTUDIANTS</h1>
            <p>L'Association des √âl√®ves et √âtudiants Sonink√© √† Saint-Louis accueille et accompagne les nouveaux bacheliers orient√©s √† l'Universit√© Gaston Berger</p>
            <div class="hero-stats">
                <div class="stat">
                    <div class="stat-number">30+</div>
                    <div class="stat-label">Nouveaux √©tudiants 2025</div>
                </div>
                <div class="stat">
                    <div class="stat-number">280K</div>
                    <div class="stat-label">FCFA de caution pay√©e</div>
                </div>
                <div class="stat">
                    <div class="stat-number">10+</div>
                    <div class="stat-label">Ann√©es d'existence</div>
                </div>
            </div>
            <div style="margin-top: 2rem;">
                <a href="#dons" class="btn btn-secondary" style="margin-right: 1rem;">Faire un don</a>
                <button class="btn btn-primary" onclick="showRegister()">Devenir membre</button>
            </div>
        </section>

        <!-- √Ä propos -->
        <section id="apropos">
            <h2>√Ä Propos de l'AEESS</h2>
            <p style="text-align: center; max-width: 800px; margin: 0 auto 2rem;">
                L'AEESS est une association √† but non lucratif qui, depuis sa cr√©ation, accueille et accompagne les nouveaux bacheliers orient√©s √† l'Universit√© Gaston Berger de Saint-Louis. Notre mission : garantir leur √©panouissement social et √©ducatif √† travers un accompagnement global.
            </p>
            <div class="crisis-alert">
                <h3>üè† Notre Mission Principale : R√©soudre la Crise du Logement</h3>
                <p>L'UGB manque cruellement d'infrastructures de logement. Les anciens √©tudiants membres de l'AEESS proposent d'h√©berger nos fr√®res et s≈ìurs dans leurs chambres universitaires, mais nous ne pouvons qu'en accueillir un nombre limit√©. Pour les autres, l'AEESS cherche des logements aux alentours, ce qui co√ªte tr√®s cher.</p>
            </div>
        </section>

        <!-- Nos Actions -->
        <section id="actions">
            <h2>Nos Actions</h2>
            <div class="actions-grid">
                <div class="action-card">
                    <h3>üè† H√©bergement & Logement</h3>
                    <p>Accueil dans les chambres universitaires et recherche de logements priv√©s pour les nouveaux √©tudiants</p>
                </div>
                <div class="action-card">
                    <h3>üìã Accompagnement Administratif</h3>
                    <p>Aide aux d√©marches d'inscription √† l'UGB en collaboration avec les associations p√©dagogiques des UFR</p>
                </div>
                <div class="action-card">
                    <h3>üìö Soutien P√©dagogique</h3>
                    <p>Programme de mentorat (jumelage ancien/nouveau), aide aux cours, TP, TD et pr√©paration d'examens</p>
                </div>
                <div class="action-card">
                    <h3>üéì Formations</h3>
                    <p>Prise de parole en public, gestion de conflits, d√©veloppement personnel</p>
                </div>
                <div class="action-card">
                    <h3>‚öΩ Activit√©s Sportives</h3>
                    <p>Organisation de matchs de football pour renforcer la coh√©sion entre √©tudiants</p>
                </div>
                <div class="action-card">
                    <h3>üéâ Journ√©es d'Int√©gration</h3>
                    <p>√âv√©nements d'accueil, th√©s d√©bats et conf√©rences pour mieux se conna√Ætre</p>
                </div>
            </div>
        </section>

        <!-- Crise du Logement -->
        <section id="crise">
            <h2>üö® La Crise du Logement √† l'UGB</h2>
            <div class="crisis-alert">
                <h3>La R√©alit√© sur le Terrain</h3>
                <ul style="margin-left: 2rem; margin-top: 1rem;">
                    <li><strong>30 nouveaux bacheliers</strong> accueillis en 2025</li>
                    <li><strong>280 000 FCFA</strong> de caution pour un seul appartement (3 chambres)</li>
                    <li><strong>30 000 √† 50 000 FCFA</strong> de loyer mensuel par logement</li>
                    <li><strong>150 000 FCFA</strong> pr√©lev√©s de la caisse de l'association</li>
                    <li><strong>Croissance continue</strong> du nombre d'√©tudiants chaque ann√©e</li>
                </ul>
            </div>
            <p style="text-align: center; margin-top: 2rem; font-size: 1.1rem;">
                <strong>Sans votre aide, nous ne pouvons pas continuer notre mission.</strong><br>
                Chaque contribution compte pour offrir un toit √† nos √©tudiants.
            </p>
        </section>

        <!-- Dons -->
        <section id="dons">
            <h2>üíö Soutenez-nous</h2>
            <p style="text-align: center; margin-bottom: 2rem;">
                Un simple geste peut changer un parcours. Participez √† la cagnotte de l'AEESS et contribuez √† l'avenir de nos √©tudiants.
            </p>

            <div class="impact-examples">
                <div class="impact-item">
                    <div class="impact-amount">15 000 F</div>
                    <div>Contribution d'un √©tudiant √† sa caution</div>
                </div>
                <div class="impact-item">
                    <div class="impact-amount">30 000 F</div>
                    <div>Loyer mensuel minimum d'un logement</div>
                </div>
                <div class="impact-item">
                    <div class="impact-amount">50 000 F</div>
                    <div>Loyer mensuel complet</div>
                </div>
                <div class="impact-item">
                    <div class="impact-amount">280 000 F</div>
                    <div>Caution compl√®te d'un appartement</div>
                </div>
            </div>

            <h3 style="text-align: center; margin-top: 3rem; margin-bottom: 2rem;">Moyens de Paiement</h3>
            <div class="donation-methods">
                <div class="payment-card">
                    <h3>üì± Wave</h3>
                    <div class="payment-number">78 247 74 12</div>
                    <p>Envoyez votre contribution via Wave</p>
                </div>
                <div class="payment-card">
                    <h3>üì± Orange Money</h3>
                    <div class="payment-number">78 488 89 04</div>
                    <p>Envoyez votre contribution via Orange Money</p>
                </div>
            </div>

            <p style="text-align: center; margin-top: 2rem; font-style: italic;">
                Infoline : <strong>+221 78 374 89 95</strong>
            </p>
        </section>

        <!-- Contact -->
        <section id="contact">
            <h2>üìû Contactez-nous</h2>
            <div style="max-width: 600px; margin: 0 auto;">
                <div class="action-card" style="text-align: center;">
                    <p><strong>Email :</strong> aeesssonikara@gmail.com</p>
                    <p><strong>T√©l√©phone :</strong> +221 78 374 89 95</p>
                    <p><strong>Localisation :</strong> Sanar Peul, Saint-Louis, S√©n√©gal</p>
                    <p style="margin-top: 1rem;">Universit√© Gaston Berger de Saint-Louis</p>
                </div>
            </div>
        </section>
    </div>

    <!-- Member Dashboard - Facebook Style -->
    <div id="memberDashboard" class="dashboard">
        <div class="dashboard-container">
            <!-- Left Sidebar -->
            <div class="left-sidebar">
                <div class="sidebar-menu">
                    <div class="menu-item active" onclick="showDashboardSection('feed')">
                        <span class="menu-icon">üè†</span>
                        <span>Fil d'actualit√©</span>
                    </div>
                    <div class="menu-item" onclick="showDashboardSection('documents')">
                        <span class="menu-icon">üìö</span>
                        <span>Documents</span>
                    </div>
                    <div class="menu-item" onclick="showDashboardSection('events')">
                        <span class="menu-icon">üìÖ</span>
                        <span>√âv√©nements</span>
                    </div>
                    <div class="menu-item" onclick="showDashboardSection('mentorship')">
                        <span class="menu-icon">ü§ù</span>
                        <span>Mon Mentorat</span>
                    </div>
                    <div class="menu-item" onclick="showDashboardSection('profile')">
                        <span class="menu-icon">üë§</span>
                        <span>Mon Profil</span>
                    </div>
                </div>
            </div>

            <!-- Main Feed -->
            <div class="main-feed">
                <!-- Feed Section -->
                <div id="feedSection">
                    <!-- Create Post -->
                    <div class="create-post-box">
                        <div class="post-input-area">
                            <div class="post-avatar" id="createPostAvatar">U</div>
                            <textarea class="post-input" id="newPostContent" placeholder="Quoi de neuf, " rows="3"></textarea>
                        </div>
                        <div class="post-actions-bar">
                            <button class="post-action-btn" onclick="createPost()">
                                <span style="font-size: 1.2rem;">‚úçÔ∏è</span>
                                <span>Publier</span>
                            </button>
                            <button class="post-action-btn">
                                <span style="font-size: 1.2rem;">üì∑</span>
                                <span>Photo</span>
                            </button>
                            <button class="post-action-btn">
                                <span style="font-size: 1.2rem;">üìÑ</span>
                                <span>Document</span>
                            </button>
                        </div>
                    </div>

                    <!-- Posts Container -->
                    <div id="postsContainer">
                        <div class="spinner"></div>
                    </div>
                </div>

                <!-- Documents Section -->
                <div id="documentsSection" class="documents-section hidden">
                    <div class="upload-box">
                        <h3 style="margin-bottom: 1.5rem;">üì§ Ajouter un document</h3>
                        <div class="form-group">
                            <label>Titre du document</label>
                            <input type="text" id="docTitle" placeholder="Ex: Cours de Math√©matiques L1">
                        </div>
                        <div class="form-group">
                            <label>UFR</label>
                            <select id="docUFR">
                                <option value="">S√©lectionner UFR</option>
                                <option value="SAT">Sciences Appliqu√©es et Technologie</option>
                                <option value="LSH">Lettres et Sciences Humaines</option>
                                <option value="SEG">Sciences √âconomiques et Gestion</option>
                                <option value="SJP">Sciences Juridiques et Politiques</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Fichier</label>
                            <input type="file" id="docFile">
                        </div>
                        <button class="btn btn-primary" onclick="uploadDocument()">T√©l√©charger le document</button>
                    </div>
                    <h3 style="margin-bottom: 1rem;">üìö Biblioth√®que</h3>
                    <div id="documentsContainer" class="documents-grid">
                        <div class="spinner"></div>
                    </div>
                </div>

                <!-- Events Section -->
                <div id="eventsSection" class="documents-section hidden">
                    <div class="upload-box">
                        <h3 style="margin-bottom: 1.5rem;">‚ûï Cr√©er un √©v√©nement</h3>
                        <div class="form-group">
                            <label>Titre</label>
                            <input type="text" id="eventTitle" placeholder="Ex: Match de football">
                        </div>
                        <div class="form-group">
                            <label>Description</label>
                            <textarea id="eventDesc" rows="3" placeholder="D√©tails de l'√©v√©nement"></textarea>
                        </div>
                        <div class="form-group">
                            <label>Date</label>
                            <input type="datetime-local" id="eventDate">
                        </div>
                        <div class="form-group">
                            <label>Lieu</label>
                            <input type="text" id="eventLocation" placeholder="Ex: Terrain de sport UGB">
                        </div>
                        <button class="btn btn-primary" onclick="createEvent()">Cr√©er l'√©v√©nement</button>
                    </div>
                    <h3 style="margin-bottom: 1rem;">üìÖ √âv√©nements √† venir</h3>
                    <div id="eventsContainer">
                        <div class="spinner"></div>
                    </div>
                </div>

                <!-- Mentorship Section -->
                <div id="mentorshipSection" class="documents-section hidden">
                    <div class="upload-box">
                        <h3 style="margin-bottom: 1rem;">ü§ù Mon Mentorat</h3>
                        <p style="margin-bottom: 1.5rem;">Le programme de jumelage AEESS connecte les anciens avec les nouveaux √©tudiants pour un accompagnement personnalis√©.</p>
                        <div id="mentorshipInfo"></div>
                    </div>
                </div>

                <!-- Profile Section -->
                <div id="profileSection" class="profile-section hidden">
                    <div class="profile-header">
                        <div class="profile-avatar-large" id="profileAvatarLarge">U</div>
                        <div class="profile-name" id="profileName">Utilisateur</div>
                        <p id="profileStatus" style="color: #65676b;"></p>
                    </div>
                    <div class="profile-info-grid">
                        <h3 style="margin-bottom: 1.5rem;">Informations personnelles</h3>
                        <div id="profileInfo"></div>
                        <button class="btn btn-secondary" onclick="editProfile()" style="margin-top: 1.5rem;">Modifier le profil</button>
                    </div>
                </div>
            </div>

            <!-- Right Sidebar -->
            <div class="right-sidebar">
                <!-- Contacts -->
                <div class="contacts-box">
                    <div class="sidebar-title">Contacts</div>
                    <div id="contactsList">
                        <div class="contact-item">
                            <div class="contact-avatar">
                                A
                                <div class="online-dot"></div>
                            </div>
                            <div class="contact-name">Membres en ligne</div>
                        </div>
                    </div>
                </div>

                <!-- Upcoming Events -->
                <div class="events-box">
                    <div class="sidebar-title">√âv√©nements √† venir</div>
                    <div id="upcomingEvents">
                        <p style="color: #65676b; font-size: 0.9rem;">Aucun √©v√©nement programm√©</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Login Modal -->
    <div id="loginModal" class="modal">
        <div class="modal-content">
            <h2 style="margin-bottom: 1.5rem;">Connexion</h2>
            <form id="loginForm" onsubmit="login(event)">
                <div class="form-group">
                    <label>Email</label>
                    <input type="email" id="loginEmail" required placeholder="votre@email.com">
                </div>
                <div class="form-group">
                    <label>Mot de passe</label>
                    <input type="password" id="loginPassword" required placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%;">Se connecter</button>
                <p style="text-align: center; margin-top: 1.5rem;">
                    Pas encore membre ? <a href="#" onclick="showRegister()" style="color: var(--primary-green); font-weight: 600;">S'inscrire</a>
                </p>
                <button type="button" class="btn btn-secondary" onclick="closeModal()" style="width: 100%; margin-top: 1rem;">Annuler</button>
            </form>
        </div>
    </div>

    <!-- Register Modal -->
    <div id="registerModal" class="modal">
        <div class="modal-content">
            <h2 style="margin-bottom: 1.5rem;">Inscription</h2>
            <form id="registerForm" onsubmit="register(event)">
                <div class="form-group">
                    <label>Nom complet</label>
                    <input type="text" id="registerName" required placeholder="Pr√©nom Nom">
                </div>
                <div class="form-group">
                    <label>Email</label>
                    <input type="email" id="registerEmail" required placeholder="votre@email.com">
                </div>
                <div class="form-group">
                    <label>Mot de passe</label>
                    <input type="password" id="registerPassword" required minlength="6" placeholder="Min. 6 caract√®res">
                </div>
                <div class="form-group">
                    <label>T√©l√©phone</label>
                    <input type="tel" id="registerPhone" required placeholder="77 123 45 67">
                </div>
                <div class="form-group">
                    <label>UFR</label>
                    <select id="registerUFR" required>
                        <option value="">S√©lectionner votre UFR</option>
                        <option value="SAT">Sciences Appliqu√©es et Technologie</option>
                        <option value="LSH">Lettres et Sciences Humaines</option>
                        <option value="SEG">Sciences √âconomiques et Gestion</option>
                        <option value="SJP">Sciences Juridiques et Politiques</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Ann√©e d'√©tudes</label>
                    <select id="registerYear" required>
                        <option value="">S√©lectionner</option>
                        <option value="L1">Licence 1</option>
                        <option value="L2">Licence 2</option>
                        <option value="L3">Licence 3</option>
                        <option value="M1">Master 1</option>
                        <option value="M2">Master 2</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Statut</label>
                    <select id="registerStatus" required>
                        <option value="">S√©lectionner</option>
                        <option value="nouveau">Nouveau bachelier</option>
                        <option value="ancien">Ancien √©tudiant</option>
                    </select>
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%;">S'inscrire</button>
                <p style="text-align: center; margin-top: 1.5rem;">
                    D√©j√† membre ? <a href="#" onclick="showLogin()" style="color: var(--primary-green); font-weight: 600;">Se connecter</a>
                </p>
                <button type="button" class="btn btn-secondary" onclick="closeModal()" style="width: 100%; margin-top: 1rem;">Annuler</button>
            </form>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <div class="footer-content">
            <div class="footer-links">
                <a href="#accueil">Accueil</a>
                <a href="#apropos">√Ä propos</a>
                <a href="#actions">Nos Actions</a>
                <a href="#dons">Soutenez-nous</a>
                <a href="#contact">Contact</a>
            </div>
            <p>&copy; 2025 AEESS - Association des √âl√®ves et √âtudiants Sonink√© √† Saint-Louis</p>
            <p>Soninkara djik√© na r√©mou n√®</p>
        </div>
    </footer>

    <script>
        // Initialize Supabase
        const SUPABASE_URL = 'https://wshjyzkwcmlqmldrmjrh.supabase.co';
        const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndzaGp5emt3Y21scW1sZHJtanJoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE4NTcxODYsImV4cCI6MjA3NzQzMzE4Nn0.VzxNLTXg9bUZNUgZF-bqXEefjVNTcIIT-Svgi1nDSyo';
        const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

        let currentUser = null;
        let currentCommentPost = null;

        // Check auth on load
        async function checkAuth() {
            const { data: { session } } = await supabase.auth.getSession();
            if (session) {
                currentUser = session.user;
                showMemberDashboard();
            }
        }

        // Modal Functions
        function showLogin() {
            closeModal();
            document.getElementById('loginModal').classList.add('active');
        }

        function showRegister() {
            closeModal();
            document.getElementById('registerModal').classList.add('active');
        }

        function closeModal() {
            document.getElementById('loginModal').classList.remove('active');
            document.getElementById('registerModal').classList.remove('active');
        }

        // Login
        async function login(event) {
            event.preventDefault();
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;

            const { data, error } = await supabase.auth.signInWithPassword({
                email: email,
                password: password
            });

            if (error) {
                alert('Erreur de connexion: ' + error.message);
            } else {
                currentUser = data.user;
                closeModal();
                showMemberDashboard();
            }
        }

        // Register
        async function register(event) {
            event.preventDefault();
            const email = document.getElementById('registerEmail').value;
            const password = document.getElementById('registerPassword').value;
            const name = document.getElementById('registerName').value;
            const phone = document.getElementById('registerPhone').value;
            const ufr = document.getElementById('registerUFR').value;
            const year = document.getElementById('registerYear').value;
            const status = document.getElementById('registerStatus').value;

            const { data, error } = await supabase.auth.signUp({
                email: email,
                password: password,
                options: {
                    data: {
                        full_name: name,
                        phone: phone,
                        ufr: ufr,
                        year: year,
                        status: status
                    }
                }
            });

            if (error) {
                alert('Erreur d\'inscription: ' + error.message);
            } else {
                alert('Inscription r√©ussie! V√©rifiez votre email pour confirmer votre compte.');
                closeModal();
            }
        }

        // Logout
        async function logout() {
            await supabase.auth.signOut();
            currentUser = null;
            showPublicContent();
        }

        // Show Member Dashboard
        function showMemberDashboard() {
            document.getElementById('publicContent').style.display = 'none';
            document.getElementById('memberDashboard').classList.add('active');
            document.getElementById('loginBtn').classList.add('hidden');
            document.getElementById('userMenu').classList.remove('hidden');
            
            const initial = currentUser.user_metadata.full_name ? currentUser.user_metadata.full_name.charAt(0).toUpperCase() : 'U';
            document.getElementById('userAvatar').textContent = initial;
            document.getElementById('createPostAvatar').textContent = initial;
            
            loadPosts();
            loadUpcomingEvents();
        }

        // Show Public Content
        function showPublicContent() {
            document.getElementById('publicContent').style.display = 'block';
            document.getElementById('memberDashboard').classList.remove('active');
            document.getElementById('loginBtn').classList.remove('hidden');
            document.getElementById('userMenu').classList.add('hidden');
        }

        // Dashboard Navigation
        function showDashboardSection(section) {
            // Update menu items
            document.querySelectorAll('.menu-item').forEach(item => {
                item.classList.remove('active');
            });
            event.target.closest('.menu-item').classList.add('active');

            // Hide all sections
            document.getElementById('feedSection').classList.add('hidden');
            document.getElementById('documentsSection').classList.add('hidden');
            document.getElementById('eventsSection').classList.add('hidden');
            document.getElementById('mentorshipSection').classList.add('hidden');
            document.getElementById('profileSection').classList.add('hidden');

            // Show selected section
            if (section === 'feed') {
                document.getElementById('feedSection').classList.remove('hidden');
                loadPosts();
            } else if (section === 'documents') {
                document.getElementById('documentsSection').classList.remove('hidden');
                loadDocuments();
            } else if (section === 'events') {
                document.getElementById('eventsSection').classList.remove('hidden');
                loadEvents();
            } else if (section === 'mentorship') {
                document.getElementById('mentorshipSection').classList.remove('hidden');
                loadMentorship();
            } else if (section === 'profile') {
                document.getElementById('profileSection').classList.remove('hidden');
                loadProfile();
            }
        }

        // Create Post
        async function createPost() {
            const content = document.getElementById('newPostContent').value.trim();
            if (!content) {
                alert('Veuillez entrer du contenu');
                return;
            }

            const { error } = await supabase
                .from('posts')
                .insert([{
                    user_id: currentUser.id,
                    content: content,
                    author_name: currentUser.user_metadata.full_name
                }]);

            if (error) {
                alert('Erreur: ' + error.message);
            } else {
                document.getElementById('newPostContent').value = '';
                loadPosts();
            }
        }

        // Load Posts
        async function loadPosts() {
            const { data, error } = await supabase
                .from('posts')
                .select('*')
                .order('created_at', { ascending: false });

            const container = document.getElementById('postsContainer');
            
            if (error || !data || data.length === 0) {
                container.innerHTML = '<div style="text-align: center; padding: 3rem; color: #65676b;"><p>Aucune publication pour le moment.</p><p style="margin-top: 0.5rem; font-size: 0.9rem;">Soyez le premier √† publier!</p></div>';
                return;
            }

            container.innerHTML = '';
            for (const post of data) {
                const postCard = await createPostCard(post);
                container.appendChild(postCard);
            }
        }

        // Create Post Card
        async function createPostCard(post) {
            const card = document.createElement('div');
            card.className = 'post-card';
            
            const initial = post.author_name ? post.author_name.charAt(0).toUpperCase() : 'U';
            const timeAgo = getTimeAgo(new Date(post.created_at));
            
            // Get comments
            const { data: comments } = await supabase
                .from('comments')
                .select('*')
                .eq('post_id', post.id)
                .order('created_at', { ascending: true});
            
            const commentsCount = comments ? comments.length : 0;
            
            card.innerHTML = `
                <div class="post-header">
                    <div class="post-avatar">${initial}</div>
                    <div class="post-author-info">
                        <div class="post-author-name">${post.author_name || 'Utilisateur'}</div>
                        <div class="post-time">${timeAgo}</div>
                    </div>
                </div>
                <div class="post-content">${post.content}</div>
                <div class="post-stats">
                    <span>${post.likes_count || 0} J'aime</span>
                    <span>${commentsCount} commentaire${commentsCount !== 1 ? 's' : ''}</span>
                </div>
                <div class="post-actions">
                    <button class="post-action" onclick="toggleLike('${post.id}')">
                        <span>üëç</span> J'aime
                    </button>
                    <button class="post-action" onclick="toggleComments('${post.id}')">
                        <span>üí¨</span> Commenter
                    </button>
                    <button class="post-action">
                        <span>üîó</span> Partager
                    </button>
                </div>
                <div class="comments-section hidden" id="comments-${post.id}">
                    <div id="comments-list-${post.id}"></div>
                    <div class="comment-input-area">
                        <div class="comment-avatar">${currentUser.user_metadata.full_name ? currentUser.user_metadata.full_name.charAt(0).toUpperCase() : 'U'}</div>
                        <input type="text" class="comment-input" id="comment-input-${post.id}" placeholder="√âcrivez un commentaire...">
                        <button class="btn btn-primary" onclick="addComment('${post.id'}" style="padding: 0.5rem 1rem;">‚úâÔ∏è</button>
                    </div>
                </div>
            `;
            
            return card;
        }

        // Toggle Comments
        async function toggleComments(postId) {
            const commentsSection = document.getElementById(`comments-${postId}`);
            if (commentsSection.classList.contains('hidden')) {
                commentsSection.classList.remove('hidden');
                await loadComments(postId);
            } else {
                commentsSection.classList.add('hidden');
            }
        }

        // Load Comments
        async function loadComments(postId) {
            const { data, error } = await supabase
                .from('comments')
                .select('*')
                .eq('post_id', postId)
                .order('created_at', { ascending: true });
            
            const container = document.getElementById(`comments-list-${postId}`);
            if (!data || data.length === 0) {
                container.innerHTML = '';
                return;
            }
            
            container.innerHTML = data.map(comment => {
                const initial = comment.author_name ? comment.author_name.charAt(0).toUpperCase() : 'U';
                const timeAgo = getTimeAgo(new Date(comment.created_at));
                return `
                    <div class="comment-item">
                        <div class="comment-avatar">${initial}</div>
                        <div class="comment-content">
                            <div class="comment-bubble">
                                <div class="comment-author">${comment.author_name || 'Utilisateur'}</div>
                                <div class="comment-text">${comment.content}</div>
                            </div>
                            <div class="comment-time">${timeAgo}</div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        // Add Comment
        async function addComment(postId) {
            const input = document.getElementById(`comment-input-${postId}`);
            const content = input.value.trim();
            
            if (!content) return;
            
            const { error } = await supabase
                .from('comments')
                .insert([{
                    post_id: postId,
                    user_id: currentUser.id,
                    author_name: currentUser.user_metadata.full_name,
                    content: content
                }]);
            
            if (!error) {
                input.value = '';
                await loadComments(postId);
            }
        }

        // Toggle Like
        async function toggleLike(postId) {
            // Check if already liked
            const { data: existing } = await supabase
                .from('likes')
                .select('*')
                .eq('post_id', postId)
                .eq('user_id', currentUser.id)
                .single();
            
            if (existing) {
                // Unlike
                await supabase
                    .from('likes')
                    .delete()
                    .eq('post_id', postId)
                    .eq('user_id', currentUser.id);
            } else {
                // Like
                await supabase
                    .from('likes')
                    .insert([{
                        post_id: postId,
                        user_id: currentUser.id
                    }]);
            }
            
            loadPosts();
        }

        // Upload Document
        async function uploadDocument() {
            const title = document.getElementById('docTitle').value;
            const ufr = document.getElementById('docUFR').value;
            const fileInput = document.getElementById('docFile');
            const file = fileInput.files[0];

            if (!title || !ufr || !file) {
                alert('Veuillez remplir tous les champs');
                return;
            }

            const fileName = `${Date.now()}_${file.name}`;
            const { error: uploadError } = await supabase.storage
                .from('documents')
                .upload(fileName, file);

            if (uploadError) {
                alert('Erreur: ' + uploadError.message);
                return;
            }

            const { data: urlData } = supabase.storage
                .from('documents')
                .getPublicUrl(fileName);

            const { error } = await supabase
                .from('documents')
                .insert([{
                    title: title,
                    ufr: ufr,
                    file_url: urlData.publicUrl,
                    uploaded_by: currentUser.id,
                    uploader_name: currentUser.user_metadata.full_name
                }]);

            if (error) {
                alert('Erreur: ' + error.message);
            } else {
                document.getElementById('docTitle').value = '';
                document.getElementById('docUFR').value = '';
                document.getElementById('docFile').value = '';
                loadDocuments();
            }
        }

        // Load Documents
        async function loadDocuments() {
            const { data, error } = await supabase
                .from('documents')
                .select('*')
                .order('created_at', { ascending: false });

            const container = document.getElementById('documentsContainer');
            
            if (error || !data || data.length === 0) {
                container.innerHTML = '<p style="text-align: center; color: #65676b; grid-column: 1/-1;">Aucun document disponible.</p>';
                return;
            }

            container.innerHTML = data.map(doc => `
                <div class="document-card" onclick="window.open('${doc.file_url}', '_blank')">
                    <div class="document-icon">üìÑ</div>
                    <strong>${doc.title}</strong>
                    <div style="font-size: 0.9rem; color: #666; margin-top: 0.5rem;">${doc.ufr}</div>
                    <div style="font-size: 0.8rem; color: #999; margin-top: 0.3rem;">Par ${doc.uploader_name || 'Anonyme'}</div>
                </div>
            `).join('');
        }

        // Create Event
        async function createEvent() {
            const title = document.getElementById('eventTitle').value;
            const desc = document.getElementById('eventDesc').value;
            const date = document.getElementById('eventDate').value;
            const location = document.getElementById('eventLocation').value;

            if (!title || !date) {
                alert('Veuillez remplir au minimum le titre et la date');
                return;
            }

            const { error } = await supabase
                .from('events')
                .insert([{
                    title: title,
                    description: desc,
                    event_date: date,
                    location: location,
                    created_by: currentUser.id
                }]);

            if (error) {
                alert('Erreur: ' + error.message);
            } else {
                document.getElementById('eventTitle').value = '';
                document.getElementById('eventDesc').value = '';
                document.getElementById('eventDate').value = '';
                document.getElementById('eventLocation').value = '';
                loadEvents();
            }
        }

        // Load Events
        async function loadEvents() {
            const { data, error } = await supabase
                .from('events')
                .select('*')
                .order('event_date', { ascending: true });

            const container = document.getElementById('eventsContainer');
            
            if (error || !data || data.length === 0) {
                container.innerHTML = '<div class="action-card"><p style="text-align: center; color: #65676b;">Aucun √©v√©nement programm√©.</p></div>';
                return;
            }

            container.innerHTML = data.map(event => {
                const eventDate = new Date(event.event_date);
                return `
                    <div class="action-card">
                        <h3>${event.title}</h3>
                        <p><strong>üìÖ Date :</strong> ${eventDate.toLocaleDateString('fr-FR', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric', hour: '2-digit', minute: '2-digit' })}</p>
                        ${event.location ? `<p><strong>üìç Lieu :</strong> ${event.location}</p>` : ''}
                        ${event.description ? `<p style="margin-top: 1rem;">${event.description}</p>` : ''}
                    </div>
                `;
            }).join('');
        }

        // Load Upcoming Events (Sidebar)
        async function loadUpcomingEvents() {
            const { data } = await supabase
                .from('events')
                .select('*')
                .gte('event_date', new Date().toISOString())
                .order('event_date', { ascending: true })
                .limit(3);

            const container = document.getElementById('upcomingEvents');
            
            if (!data || data.length === 0) {
                container.innerHTML = '<p style="color: #65676b; font-size: 0.9rem;">Aucun √©v√©nement programm√©</p>';
                return;
            }

            container.innerHTML = data.map(event => {
                const eventDate = new Date(event.event_date);
                return `
                    <div class="event-item">
                        <div class="event-date">${eventDate.toLocaleDateString('fr-FR', { day: 'numeric', month: 'short' })}</div>
                        <div class="event-title">${event.title}</div>
                    </div>
                `;
            }).join('');
        }

        // Load Mentorship
        async function loadMentorship() {
            const container = document.getElementById('mentorshipInfo');
            const userStatus = currentUser.user_metadata.status;

            if (userStatus === 'nouveau') {
                // Check if has mentor
                const { data } = await supabase
                    .from('mentorship')
                    .select('*, mentor:profiles!mentorship_mentor_id_fkey(full_name, phone, ufr)')
                    .eq('mentee_id', currentUser.id)
                    .eq('status', 'active')
                    .single();

                if (data && data.mentor) {
                    container.innerHTML = `
                        <div class="action-card">
                            <h4>üë®‚Äçüè´ Votre Mentor</h4>
                            <p style="margin-top: 1rem;"><strong>Nom :</strong> ${data.mentor.full_name || 'N/A'}</p>
                            <p><strong>UFR :</strong> ${data.mentor.ufr || 'N/A'}</p>
                            <p><strong>T√©l√©phone :</strong> ${data.mentor.phone || 'N/A'}</p>
                            <p style="margin-top: 1rem; color: #65676b;">Votre mentor est l√† pour vous accompagner dans vos cours, TD, TP et pr√©paration d'examens.</p>
                        </div>
                    `;
                } else {
                    container.innerHTML = `
                        <div class="action-card">
                            <p style="color: #65676b;">Vous n'avez pas encore de mentor assign√©. Contactez l'administration de l'AEESS pour √™tre jumel√© avec un ancien.</p>
                        </div>
                    `;
                }
            } else {
                // Check if mentoring someone
                const { data } = await supabase
                    .from('mentorship')
                    .select('*, mentee:profiles!mentorship_mentee_id_fkey(full_name, phone, ufr, year)')
                    .eq('mentor_id', currentUser.id)
                    .eq('status', 'active');

                if (data && data.length > 0) {
                    container.innerHTML = `
                        <h4>üë• Vos Filleuls</h4>
                        ${data.map(m => `
                            <div class="action-card" style="margin-top: 1rem;">
                                <p><strong>Nom :</strong> ${m.mentee.full_name || 'N/A'}</p>
                                <p><strong>UFR :</strong> ${m.mentee.ufr || 'N/A'}</p>
                                <p><strong>Ann√©e :</strong> ${m.mentee.year || 'N/A'}</p>
                                <p><strong>T√©l√©phone :</strong> ${m.mentee.phone || 'N/A'}</p>
                            </div>
                        `).join('')}
                    `;
                } else {
                    container.innerHTML = `
                        <div class="action-card">
                            <p style="color: #65676b;">Vous n'√™tes pas encore mentor. Proposez-vous pour accompagner un nouveau bachelier!</p>
                        </div>
                    `;
                }
            }
        }

        // Load Profile
        async function loadProfile() {
            const user = currentUser;
            const initial = user.user_metadata.full_name ? user.user_metadata.full_name.charAt(0).toUpperCase() : 'U';
            
            document.getElementById('profileAvatarLarge').textContent = initial;
            document.getElementById('profileName').textContent = user.user_metadata.full_name || 'Utilisateur';
            document.getElementById('profileStatus').textContent = user.user_metadata.status === 'nouveau' ? 'Nouveau bachelier' : 'Ancien √©tudiant';
            
            const container = document.getElementById('profileInfo');
            container.innerHTML = `
                <div class="form-group">
                    <label>Email</label>
                    <p style="padding: 0.75rem; background: var(--bg-light); border-radius: 8px;"><strong>${user.email}</strong></p>
                </div>
                <div class="form-group">
                    <label>T√©l√©phone</label>
                    <p style="padding: 0.75rem; background: var(--bg-light); border-radius: 8px;"><strong>${user.user_metadata.phone || 'Non renseign√©'}</strong></p>
                </div>
                <div class="form-group">
                    <label>UFR</label>
                    <p style="padding: 0.75rem; background: var(--bg-light); border-radius: 8px;"><strong>${user.user_metadata.ufr || 'Non renseign√©'}</strong></p>
                </div>
                <div class="form-group">
                    <label>Ann√©e d'√©tudes</label>
                    <p style="padding: 0.75rem; background: var(--bg-light); border-radius: 8px;"><strong>${user.user_metadata.year || 'Non renseign√©'}</strong></p>
                </div>
            `;
        }

        // Edit Profile
        function editProfile() {
            alert('Fonctionnalit√© de modification du profil √† venir!');
        }

        // Utility: Get Time Ago
        function getTimeAgo(date) {
            const seconds = Math.floor((new Date() - date) / 1000);
            
            let interval = seconds / 31536000;
            if (interval > 1) return Math.floor(interval) + " ans";
            
            interval = seconds / 2592000;
            if (interval > 1) return Math.floor(interval) + " mois";
            
            interval = seconds / 86400;
            if (interval > 1) return Math.floor(interval) + " j";
            
            interval = seconds / 3600;
            if (interval > 1) return Math.floor(interval) + " h";
            
            interval = seconds / 60;
            if (interval > 1) return Math.floor(interval) + " min";
            
            return "√Ä l'instant";
        }

        // Initialize app
        checkAuth();

        // Close modal when clicking outside
        window.onclick = function(event) {
            if (event.target.classList.contains('modal')) {
                closeModal();
            }
        }

        // Handle Enter key in comment inputs
        document.addEventListener('keypress', function(e) {
            if (e.target.classList.contains('comment-input') && e.key === 'Enter') {
                const postId = e.target.id.replace('comment-input-', '');
                addComment(postId);
            }
        });
    </script>
</body>
</html>
